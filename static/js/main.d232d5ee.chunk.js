(this["webpackJsonpgoit-react-hw-09-images"]=this["webpackJsonpgoit-react-hw-09-images"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1cbbL",Modal:"Modal_Modal__3Pa9o"}},13:function(e,t,a){e.exports={App:"App_App__pBYGw"}},14:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3IOpp"}},16:function(e,t,a){e.exports={loader:"Loader_loader__X3yiJ"}},21:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__15W4d",SearchForm:"Searchbar_SearchForm__tqdgu",SearchFormButton:"Searchbar_SearchFormButton__1c0to",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__31NrR",SearchFormInput:"Searchbar_SearchFormInput__3GEoU"}},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),o=a.n(r),i=(a(21),a(3)),s=a(13),l=a.n(s),u=a(4),j=a.n(u),b=a(1);function m(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(b.jsx)("header",{className:j.a.Searchbar,children:Object(b.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(r)},children:[Object(b.jsx)("button",{type:"submit",className:j.a.SearchFormButton,children:Object(b.jsx)("span",{className:j.a.SearchFormButtonLabel,children:"Search"})}),Object(b.jsx)("input",{className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.target.value)}})]})})}var h=a(14),d=a.n(h),f=a(11),g=a(8),O=a.n(g),p=a(15),_=a.n(p),v=a(16),x=a.n(v);function S(){return Object(b.jsx)(_.a,{className:x.a.loader,type:"Watch",color:"#00BFFF",height:100,width:100})}function I(e,t){return fetch("https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(e,"&page=").concat(t,"&per_page=12&key=").concat("19060894-87e054058a337546d07970d77")).then((function(e){return e.json()}))}function y(e){var t=e.onFetch,a=e.visible,c=e.numberPage,r=e.resPage,o=e.largeImageURL,s=Object(n.useState)([]),l=Object(i.a)(s,2),u=l[0],j=l[1],m=Object(n.useState)(null),h=Object(i.a)(m,2),d=h[0],g=h[1],p=Object(n.useState)("idle"),_=Object(i.a)(p,2),v=_[0],x=_[1],y=Object(n.useState)(null),F=Object(i.a)(y,2),w=F[0],B=F[1];return Object(n.useEffect)((function(){""===t&&(x("idle"),a(!0))}),[t,a]),Object(n.useEffect)((function(){g(!0)}),[t]),Object(n.useEffect)((function(){""!==t&&d&&(j([]),x("pending"),a(!0),r(!0),I(t,1).then((function(e){if(j(e.hits),a(!1),0===e.hits.length)return a(!0),x("rejected");x("resolve")})).catch((function(){return x("rejected")})).finally(g(!1),B(2)))}),[d,u,c,t,r,a]),Object(n.useEffect)((function(){w===c&&I(t,c).then((function(e){j([].concat(Object(f.a)(u),Object(f.a)(e.hits))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),a(!1),0===e.hits.length&&a(!0),x("resolve")})).catch((function(){return x("rejected")})).finally(B(w+1))}),[u,w,c,t,a]),"idle"===v?Object(b.jsx)("li",{children:Object(b.jsx)("h1",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441"})}):"rejected"===v?Object(b.jsx)("li",{children:Object(b.jsx)("h1",{children:"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})}):"pending"===v?Object(b.jsx)("li",{children:Object(b.jsx)(S,{})}):"resolve"===v?u.map((function(e){return Object(b.jsx)("li",{className:O.a.ImageGalleryItem,children:Object(b.jsx)("img",{src:e.webformatURL,"data-src":e.largeImageURL,alt:"img",className:O.a.ImageGalleryItemImage,onClick:function(){return o(e.largeImageURL)}})},e.id)})):void 0}var F=a(9),w=a.n(F);function B(e){var t=e.pageNumber;return Object(b.jsx)("div",{className:w.a.ButtonDiv,children:Object(b.jsx)("button",{className:w.a.Button,onClick:function(){t()},children:"Load more"})})}var N=function(e){var t=e.src,a=e.onFetch,c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],s=r[1],l=Object(n.useState)(1),u=Object(i.a)(l,2),j=u[0],m=u[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("ul",{className:d.a.ImageGallery,children:Object(b.jsx)(y,{onFetch:a,largeImageURL:function(e){t(e)},visible:function(e){s(!e)},numberPage:j,resPage:function(e){e&&m(1)},qq:o})}),o&&Object(b.jsx)(B,{pageNumber:function(e){m(j+1)}})]})},L=a(10),G=a.n(L),E=a.p+"static/media/404_error.a378b0df.jpg";function k(e){var t=e.src,a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){return""!==t&&(o(!0),window.addEventListener("keydown",(function(e){"Escape"===e.code&&o(!1)})),window.addEventListener("click",(function(e){"img"!==e.target.alt&&o(!1)}))),function(){window.removeEventListener("keydown",(function(e){"Escape"===e.code&&o(!1)})),window.removeEventListener("click",(function(e){"img"!==e.target.alt&&o(!1)}))}}),[t]),r&&Object(b.jsx)("div",{className:G.a.Overlay,children:Object(b.jsx)("div",{className:G.a.Modal,children:Object(b.jsx)("img",{src:t,alt:"img"})})})}k.defaultProps={src:E};var P=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),s=o[0],u=o[1];return Object(b.jsxs)("div",{className:l.a.App,children:[Object(b.jsx)(k,{src:s}),Object(b.jsx)(m,{onSubmit:function(e){c(e)}}),Object(b.jsx)(N,{onFetch:a,src:function(e){u(e)}})]})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root")),R()},8:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__R1VGO",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__X-kH7"}},9:function(e,t,a){e.exports={Button:"Button_Button__3y1R0",ButtonDiv:"Button_ButtonDiv__7YNkd"}}},[[43,1,2]]]);
//# sourceMappingURL=main.d232d5ee.chunk.js.map